<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Collective Noun | Elix</title>
    <style>
      html {
        scroll-behavior: smooth;
      }
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #ffffff;
        color: #333;
        transition: background-color 0.3s ease, color 0.3s ease;
      }
      h1,
      h2 {
        text-align: center;
      }

      p {
        max-width: 90%;
        margin: 0 auto 20px;
        padding: 0 10px;
        line-height: 1.6;
        text-align: justify;
      }
      section {
        padding: 40px 20px;
        border-bottom: 1px solid #ddd;
        scroll-margin-top: 80px;
      }
      table {
        width: 90%;
        margin: 20px auto;
        border-collapse: collapse;
        text-align: left;
      }
      th,
      td {
        padding: 12px 15px;
        border: 1px solid #ccc;
      }
      th {
        background: #f4f4f4;
      }
      .navbar {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background: #f8f8f8;
        border-bottom: 1px solid #ddd;
        position: sticky;
        top: 0;
        z-index: 1000;
      }
      .navbar h1 {
        flex-basis: 100%;
        margin: 0;
      }
      .navbar a {
        text-decoration: none;
        padding: 8px 16px;
        margin: 5px;
        background: #1976d2;
        color: #fff;
        border-radius: 4px;
        transition: background 0.2s;
      }
      .navbar a:hover {
        background: #125ba0;
      }
      .search-container {
        display: flex;
        align-items: center;
        gap: 8px;
        padding: 0 10px;
      }
      .search-container select,
      .search-container input,
      .search-container button {
        padding: 6px 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }
      .search-container button {
        background: #1976d2;
        color: #fff;
        cursor: pointer;
        transition: background 0.2s;
      }
      .search-container button:hover {
        background: #125ba0;
      }
      .highlight {
        background: yellow;
        font-weight: bold;
      }
      .toggle-dark button {
        padding: 6px 10px;
        background: #1976d2;
        color: #fff;
        border: none;
        border-radius: 4px;
        cursor: pointer;
        transition: background 0.2s;
      }
      .toggle-dark button:hover {
        background: #125ba0;
      }
      #resultNavigation {
        display: none;
        align-items: center;
        gap: 10px;
      }
      footer {
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 3px;
        background: #f4f4f4;
        border-top: 1px solid #ddd;
        position: sticky;
        bottom: 0;
        z-index: 1000;
      }

      /* Dark Mode */
      .dark-mode {
        background: #121212;
        color: #e0e0e0;
      }
      .dark-mode .navbar {
        background: #1e1e1e;
        border-color: #333;
      }
      .dark-mode .navbar a,
      .dark-mode .search-container button,
      .dark-mode .toggle-dark button {
        background: #333;
        color: #fff;
      }
      .dark-mode .navbar a:hover,
      .dark-mode .search-container button:hover,
      .dark-mode .toggle-dark button:hover {
        background: #555;
      }
      .dark-mode th {
        background: #2c2c2c;
      }
      .dark-mode td,
      .dark-mode th {
        border-color: #444;
      }
      .dark-mode .highlight {
        background: #ffc107;
        color: #000;
      }
      .dark-mode footer {
        background: #1e1e1e;
        border-color: #333;
      }
    </style>
  </head>
  <body>
    <div class="navbar">
      <h1>Collective Noun</h1>

      <div class="search-container">
        <select id="categoryFilter">
          <option value="All">All</option>
          <option value="People">People</option>
          <option value="Animals">Animals</option>
          <option value="Things">Things</option>
        </select>
        <input type="text" id="searchInput" placeholder="Search..." />
        <!-- <button id="searchButton">üîç</button> -->
      </div>

      <div id="resultNavigation">
        <button id="prevResult">‚¨ÖÔ∏è</button>
        <span id="resultCount"></span>
        <button id="nextResult">‚û°Ô∏è</button>
      </div>

      <div class="toggle-dark">
        <button id="toggleDarkMode">üåô</button>
      </div>
    </div>

    <section id="people">
      <h2>Collective Noun for People</h2>
      <p>
        Collective nouns for people are words used to describe a group of individuals acting together as a single entity. They often emphasise the shared purpose, occupation or social bond of the group ‚Äì for example, a team of players, a
        committee of members, or an audience of spectators.
      </p>
      <table>
        <thead>
          <tr>
            <th>Collective Noun</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody id="tableBodyOne"></tbody>
      </table>
    </section>

    <section id="animals">
      <h2>Collective Noun for Animals</h2>
      <p>
        Collective nouns for animals refer to specific terms that capture the characteristic behaviour or habitat of a particular species when gathered together. You might speak of a pride of lions, a murder of crows, or a pod of dolphins,
        each reflecting something of the animals‚Äô natural tendencies.
      </p>
      <table>
        <thead>
          <tr>
            <th>Collective Noun</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody id="tableBodyTwo"></tbody>
      </table>
    </section>

    <section id="things">
      <h2>Collective Noun for Things</h2>
      <p>
        Collective nouns for things classify groups of inanimate objects or items into a single concept. These terms often arise from the way the objects are used or arranged, such as a bundle of sticks, a stack of books, or a collection of
        stamps.
      </p>
      <table>
        <thead>
          <tr>
            <th>Collective Noun</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody id="tableBodyThree"></tbody>
      </table>
    </section>

    <footer>
      <p>&copy; 2025 Muhammad Ali Yusuf | All Rights Reserved</p>
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const sheetOne = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_JAs_v9NijdwPmE7fseH-DqBLUv-ooYkWSVP8vHAnHoe8hl_9TSPSf-tsAZ8kvuS7RKibGEnjUy7/pub?gid=0&single=true&output=csv';
        const sheetTwo = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_JAs_v9NijdwPmE7fseH-DqBLUv-ooYkWSVP8vHAnHoe8hl_9TSPSf-tsAZ8kvuS7RKibGEnjUy7/pub?gid=1687999817&single=true&output=csv';
        const sheetThree = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_JAs_v9NijdwPmE7fseH-DqBLUv-ooYkWSVP8vHAnHoe8hl_9TSPSf-tsAZ8kvuS7RKibGEnjUy7/pub?gid=97366730&single=true&output=csv';

        fetchData(sheetOne, 'tableBodyOne');
        fetchData(sheetTwo, 'tableBodyTwo');
        fetchData(sheetThree, 'tableBodyThree');

        document.getElementById('toggleDarkMode').addEventListener('click', () => document.body.classList.toggle('dark-mode'));

        // document.getElementById('searchButton').addEventListener('click', () => {
        //   filterTable();
        //   reset input hanya ketika tombol Search diklik
        //   document.getElementById('searchInput').value = '';
        // });
        document.getElementById('searchInput').addEventListener('input', filterTable);
        document.getElementById('categoryFilter').addEventListener('change', filterTable);
        document.getElementById('prevResult').addEventListener('click', () => navigateResults(-1));
        document.getElementById('nextResult').addEventListener('click', () => navigateResults(1));
      });

      function fetchData(url, tableBodyId) {
        fetch(url)
          .then((r) => r.text())
          .then((txt) => populateTable(txt, tableBodyId))
          .catch((e) => console.error('Gagal:', e));
      }

      function populateTable(data, tableBodyId) {
        const tbody = document.getElementById(tableBodyId);
        tbody.innerHTML = '';
        data
          .split('\n')
          .slice(1)
          .forEach((line) => {
            const tr = document.createElement('tr');
            line.split(',').forEach((col) => {
              const td = document.createElement('td');
              td.textContent = col.trim();
              tr.appendChild(td);
            });
            tbody.appendChild(tr);
          });
      }

      // -------- FILTER + HIGHLIGHT + COUNT + NAVIGATION --------
      let matchedRows = [],
        currentIndex = -1;

      function filterTable() {
        const input = document.getElementById('searchInput').value.toLowerCase().trim();
        const category = document.getElementById('categoryFilter').value;
        const bodies = ['tableBodyOne', 'tableBodyTwo', 'tableBodyThree'];
        matchedRows = [];
        currentIndex = -1;

        bodies.forEach((id, idx) => {
          const rows = document.getElementById(id).rows;
          for (let i = 0; i < rows.length; i++) {
            const td = rows[i].cells[0];
            const text = td.textContent.toLowerCase();
            const cat = idx === 0 ? 'People' : idx === 1 ? 'Animals' : 'Things';
            const okCat = category === 'All' || category === cat;
            const okText = input === '' || text.includes(input);

            // tampil atau sembunyi
            rows[i].style.display = okCat && okText ? '' : 'none';

            if (okCat && okText) {
              // highlight kata
              if (input !== '') {
                const esc = input.replace(/[-\\/^$*+?.()|[\]{}]/g, '\\$&');
                const re = new RegExp(`(${esc})`, 'gi');
                td.innerHTML = td.textContent.replace(re, '<span class="highlight">$1</span>');
              } else {
                td.innerHTML = td.textContent;
              }
              matchedRows.push(rows[i]);
            }
          }
        });

        updateResultCount();
        if (matchedRows.length) scrollToMatch(0);
        else if (input !== '') {
          // ‚Üê jika tidak ada hasil dan input tidak kosong
          alert(`Kata "${input}" gak onok, coy!`); // ‚Üê alert ditambahkan
        }
      }

      function updateResultCount() {
        const nav = document.getElementById('resultNavigation');
        const span = document.getElementById('resultCount');
        if (matchedRows.length > 1) {
          nav.style.display = 'flex';
          span.textContent = `${currentIndex + 1} / ${matchedRows.length}`;
        } else {
          nav.style.display = 'none';
        }
      }

      function scrollToMatch(i) {
        matchedRows[i]?.scrollIntoView({ behavior: 'smooth', block: 'center' });
      }

      function navigateResults(dir) {
        if (!matchedRows.length) return;
        currentIndex = (currentIndex + dir + matchedRows.length) % matchedRows.length;
        scrollToMatch(currentIndex);
        updateResultCount();
      }
    </script>
  </body>
</html>
