<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Collective Noun | Elix</title>
    <style>
      html {
        scroll-behavior: smooth;
      }

      /* Reset dan dasar */
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin: 0;
        padding: 0;
        background-color: #ffffff;
        color: #333;
        transition: background-color 0.3s ease, color 0.3s ease;
      }

      h1,
      h2 {
        text-align: center;
      }

      p {
        max-width: 90%;
        margin: 0 auto 20px;
        padding: 0 10px;
        line-height: 1.6;
        text-align: justify;
      }

      section {
        padding: 40px 20px;
        border-bottom: 1px solid #ddd;
        scroll-margin-top: 80px; /* agar tidak tertutup navbar */
      }
      section h2 {
        margin-top: 80px;
      }

      table {
        width: 90%;
        margin: 20px auto;
        border-collapse: collapse;
        text-align: left;
      }

      th,
      td {
        padding: 12px 15px;
        border: 1px solid #ccc;
      }

      th {
        background-color: #f4f4f4;
      }

      .navbar {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        gap: 10px;
        padding: 10px 20px;
        background-color: #f8f8f8;
        border-bottom: 1px solid #ddd;
        position: sticky;
        top: 0;
        z-index: 1000;
      }

      .navbar h1 {
        flex-basis: 100%;
        text-align: center;
        margin: 0;
      }

      .navbar a {
        text-decoration: none;
        display: flex;
        flex-wrap: wrap;
        padding: 8px 16px;
        margin: 5px;
        border: none;
        background-color: #1976d2;
        color: white;
        border-radius: 4px;
        cursor: pointer;
        transition: background-color 0.2s ease;
      }

      .navbar a:hover {
        background-color: #125ba0;
      }

      .search-container {
        padding: 0 10px;
        display: flex; /* Atur elemen anak berjajar ke samping */
        align-items: center; /* Vertikal rata tengah */
        gap: 8px; /* Jarak antara input dan tombol */
      }

      .search-container input {
        padding: 6px 10px;
        border: 1px solid #ccc;
        border-radius: 4px;
      }

      .search-container button {
        padding: 6px 10px;
        cursor: pointer;
        background-color: #1976d2;
        color: white;
        border: none;
        border-radius: 4px;
        transition: background-color 0.2s ease;
      }

      .search-container button:hover {
        background-color: #125ba0;
      }

      .highlight {
        background-color: yellow;
        font-weight: bold;
      }

      .toggle-dark button {
        padding: 6px 10px;
        cursor: pointer;
        background-color: #1976d2;
        color: white;
        border: none;
        border-radius: 4px;
        transition: background-color 0.2s ease;
      }

      .toggle-dark button:hover {
        background-color: #125ba0;
      }

      /* Footer */
      footer {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        align-items: center;
        /* gap: 10px; */
        padding: 3px;
        background-color: #f4f4f4;
        border-top: 1px solid #ddd;
        position: sticky;
        bottom: 0;
        z-index: 1000;
      }

      /* #backToTop {
        position: absolute;
        right: 20px;
        top: 10px;
        padding: 5px 6px;
        background-color: #1976d2;
        color: white;
        border: none;
        border-radius: 4px;
        cursor: pointer;
      } */

      /* Dark Mode */
      .dark-mode {
        background-color: #121212;
        color: #e0e0e0;
      }

      .dark-mode .navbar {
        background-color: #1e1e1e;
        border-color: #333;
      }

      .dark-mode .navbar a,
      .dark-mode .search-container button,
      .dark-mode .toggle-dark button,
      .dark-mode #backToTop {
        background-color: #333;
        color: #fff;
      }

      .dark-mode .navbar a:hover,
      .dark-mode .search-container button:hover,
      .dark-mode .toggle-dark button:hover,
      .dark-mode #backToTop:hover {
        background-color: #555;
      }

      .dark-mode th {
        background-color: #2c2c2c;
      }

      .dark-mode td,
      .dark-mode th {
        border-color: #444;
      }

      .dark-mode .highlight {
        background-color: #ffc107;
        color: #000;
      }

      .dark-mode footer {
        background-color: #1e1e1e;
        border-color: #333;
      }

      /* Media Queries */
      /* @media (max-width: 1200px) {
      }

      @media (max-width: 768px) {
      }

      @media (max-width: 576px) {
      } */
    </style>
  </head>
  <body>
    <!-- Bagian .navbar dan .search-container diubah seperti berikut -->
    <div class="navbar">
      <h1>Collective Noun</h1>

      <a href="#people" class="scroll-btn">People</a>
      <a href="#animals" class="scroll-btn">Animals</a>
      <a href="#things" class="scroll-btn">Things</a>

      <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search..." />
        <button id="searchButton">üîç</button>
      </div>
      <div id="resultNavigation" style="display: none">
        <button id="prevResult">‚¨ÖÔ∏è</button>
        <span id="resultCount" style="margin: 0 10px">0 / 0</span>
        <button id="nextResult">‚û°Ô∏è</button>
      </div>
      <div class="toggle-dark">
        <button id="toggleDarkMode">üåô</button>
      </div>
    </div>

    <section id="people">
      <h2>Collective Noun for People</h2>
      <p>
        Collective Nouns for People refer to words used to describe a group or collection of individuals working or acting together as a unit. These nouns often highlight the shared purpose or activity of the people involved. Examples
        include terms like "team", "family", "crowd", or "audience", each representing a collection of people with a common characteristic or function.
      </p>
      <table>
        <thead>
          <tr>
            <th>Collective Noun</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody id="tableBodyOne"></tbody>
      </table>
    </section>
    <br /><br />
    <section id="animals">
      <h2>Collective Noun for Animals</h2>
      <p>
        Collective Nouns for Animals refer to words used to describe a group or collection of animals of the same species. These terms often reflect the animals' behaviour, habitat, or social structure. For example, "a pride of lions" or "a
        swarm of bees" indicates a specific gathering of animals, often associated with their natural tendencies or characteristics.
      </p>
      <table>
        <thead>
          <tr>
            <th>Collective Noun</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody id="tableBodyTwo"></tbody>
      </table>
    </section>
    <br /><br />
    <section id="things">
      <h2>Collective Noun for Things</h2>
      <p>Collective Nouns for Things are used to describe groups of objects or items. These can include anything from "a bunch of grapes" to "a set of tools". These terms help categorize multiple items as a single unit.</p>
      <table>
        <thead>
          <tr>
            <th>Collective Noun</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody id="tableBodyThree"></tbody>
      </table>
    </section>

    <footer>
      <p>&copy; 2025 Muhammad Ali Yusuf | All Rights Reserved</p>
      <!-- <button id="backToTop">‚Üë</button> -->
    </footer>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const sheetOne = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_JAs_v9NijdwPmE7fseH-DqBLUv-ooYkWSVP8vHAnHoe8hl_9TSPSf-tsAZ8kvuS7RKibGEnjUy7/pub?gid=0&single=true&output=csv';
        const sheetTwo = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_JAs_v9NijdwPmE7fseH-DqBLUv-ooYkWSVP8vHAnHoe8hl_9TSPSf-tsAZ8kvuS7RKibGEnjUy7/pub?gid=1687999817&single=true&output=csv';
        const sheetThree = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vTo_JAs_v9NijdwPmE7fseH-DqBLUv-ooYkWSVP8vHAnHoe8hl_9TSPSf-tsAZ8kvuS7RKibGEnjUy7/pub?gid=97366730&single=true&output=csv';

        fetchData(sheetOne, 'tableBodyOne');
        fetchData(sheetTwo, 'tableBodyTwo');
        fetchData(sheetThree, 'tableBodyThree');

        const toggleBtn = document.getElementById('toggleDarkMode');
        toggleBtn.addEventListener('click', () => {
          document.body.classList.toggle('dark-mode');
          toggleBtn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è' : 'üåô';
        });

        document.getElementById('searchButton').addEventListener('click', searchTable);
        document.getElementById('nextResult').addEventListener('click', () => navigateResults(1));
        document.getElementById('prevResult').addEventListener('click', () => navigateResults(-1));
        // document.getElementById('backToTop').addEventListener('click', () => {
        //   window.scrollTo({ top: 0, behavior: 'smooth' });
        // });
      });

      function fetchData(url, tableBodyId) {
        fetch(url)
          .then((response) => response.text())
          .then((data) => populateTable(data, tableBodyId))
          .catch((error) => console.error('Gagal mengambil data:', error));
      }

      function populateTable(data, tableBodyId) {
        const tableBody = document.getElementById(tableBodyId);
        tableBody.innerHTML = '';

        const rows = data.split('\n').slice(1);
        rows.forEach((row) => {
          const columns = row.split(',');
          const newRow = document.createElement('tr');

          columns.forEach((column) => {
            const cell = document.createElement('td');
            cell.textContent = column.trim();
            newRow.appendChild(cell);
          });

          tableBody.appendChild(newRow);
        });
      }

      // Global state untuk pencarian
      let matchedRows = [];
      let currentIndex = -1;

      function searchTable() {
        const searchValue = document.getElementById('searchInput').value.toLowerCase().trim();

        // Cek jika input kosong
        if (searchValue === '') {
          alert('Kolom search mboten angsal kosong, ngger!');
          return; // hentikan fungsi
        }

        const allBodies = ['tableBodyOne', 'tableBodyTwo', 'tableBodyThree'];
        matchedRows = [];
        currentIndex = -1;

        allBodies.forEach((id) => {
          const tableBody = document.getElementById(id);
          const rows = Array.from(tableBody.querySelectorAll('tr'));

          rows.forEach((row) => {
            let match = false;
            const cells = row.querySelectorAll('td');

            cells.forEach((cell) => {
              const originalText = cell.textContent;
              const words = originalText.split(' ');
              const newText = words
                .map((word) => {
                  if (word.toLowerCase() === searchValue) {
                    match = true;
                    return `<span class="highlight">${word}</span>`;
                  }
                  return word;
                })
                .join(' ');
              cell.innerHTML = newText;
            });

            if (match) {
              matchedRows.push(row);
            }
          });
        });

        // Update jumlah hasil pencarian
        updateResultCount();

        if (matchedRows.length > 0) {
          currentIndex = 0;
          scrollToMatch(currentIndex);
        } else {
          alert(`Kata "${searchValue}" tidak ditemukan dalam daftar.`);
        }
      }

      function updateResultCount() {
        const resultCount = document.getElementById('resultCount');
        const nav = document.getElementById('resultNavigation');
        if (matchedRows.length > 1) {
          resultCount.textContent = `${currentIndex + 1} / ${matchedRows.length}`;
          nav.style.display = 'block';
        } else {
          nav.style.display = 'none';
        }
      }

      function scrollToMatch(index) {
        if (matchedRows[index]) {
          matchedRows[index].scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
      }

      function navigateResults(direction) {
        if (matchedRows.length === 0) return;

        currentIndex += direction;
        if (currentIndex < 0) currentIndex = matchedRows.length - 1;
        if (currentIndex >= matchedRows.length) currentIndex = 0;

        scrollToMatch(currentIndex);
        updateResultCount();
      }
    </script>
  </body>
</html>
